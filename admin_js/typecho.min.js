(function(a){a.Typecho={insertFileToEditor:function(b,c,d){},editorResize:function(b,c){$("#"+b).resizeable({minHeight:100,afterResize:function(d){$.post(c,{size:d})}})},uploadComplete:function(b){}}})(window);
(function(a){a.fn.dropdownMenu=function(b){this.each(function(){var c=this,d=a.extend({menuEl:null,btnEl:null},b);a(d.btnEl,c).click(function(){a(this).toggleClass("active");a(d.menuEl,c).toggle();return!1})})};a.fn.resizeable=function(b){var c=a.extend({minHeight:100,afterResize:null},b);return this.each(function(){function d(n){var t=n.clientY+document.documentElement.scrollTop,x=g+t;h>=t&&(x-=5);h=t;x=Math.max(p,x);textarea.height(x+"px");x<p&&f(n);return!1}function f(n){n=textarea.outerHeight();
a(document).unbind("mousemove",d).unbind("mouseup",f);textarea.css("opacity",1);textarea.focus();g=textarea=null;h=0;c.afterResize&&c.afterResize.call(u,n)}var e=a('<span class="resize"><i></i></span>').insertAfter(this),g,h=0,p=c.minHeight,u=this;e.bind("mousedown",{el:this},function(n){textarea=a(n.data.el);textarea.blur();h=n.clientY+document.documentElement.scrollTop;g=textarea.height()-h;textarea.css("opacity",.25);a(document).mousemove(d).mouseup(f);return!1})})};a.fn.tableSelectable=function(b){function c(e){e=
a(e);var g=a(f.checkEl,e),h=g.prop("checked");g.length&&(g.prop("checked",!h),h?e.removeClass("checked"):e.addClass("checked"))}var d=this,f=a.extend({checkEl:null,rowEl:null,selectAllEl:null,actionEl:null},b);a(f.rowEl,this).each(function(){a(f.checkEl,this).click(function(e){c(a(this).parents(f.rowEl))})}).click(function(e){var g=a(e.toElement?e.toElement:e.target),h=g.prop("tagName").toLowerCase();0<=a.inArray(h,["input","textarea","a","button","i"])&&"checkbox"!=g.attr("type")?e.stopPropagation():
c(this)});a(f.selectAllEl).click(function(){a(this).prop("checked")?a(f.rowEl,d).each(function(){var e=a(this);0<a(f.checkEl,this).prop("checked",!0).length&&e.addClass("checked")}):a(f.rowEl,d).each(function(){var e=a(this);0<a(f.checkEl,this).prop("checked",!1).length&&e.removeClass("checked")})});a(f.actionEl).click(function(){var e=a(this),g=e.attr("lang");g&&!confirm(g)||d.parents("form").attr("action",e.attr("href")).submit();return!1})}})($);
(function(a){a.tableDnD={currentTable:null,dragObject:null,mouseOffset:null,oldY:0,build:function(b){b=b||{};this.each(function(){this.tableDnDConfig={onDragStyle:b.onDragStyle,onDropStyle:b.onDropStyle,onDragClass:b.onDragClass?b.onDragClass:"tDnD_whileDrag",onDrop:b.onDrop,onDragStart:b.onDragStart,scrollAmount:b.scrollAmount?b.scrollAmount:5};a.tableDnD.makeDraggable(this);if(0==$("tfoot",this).length&&0<$("thead",this).length){var c=$("thead",this),d=$("th",c).length;c=$('<tfoot><tr><td style="padding:0;height:0;line-height:0;border:none" colspan="'+
d+'"></td></tr></tfoot>').insertAfter(c);d=$("tr:last",this);if("tfoot"!=d.parent().prop("tagName").toLowerCase()){d=$("td",d);var f=d.height();d.height(f-c.outerHeight())}}});a(document).bind("mousemove",a.tableDnD.mousemove).bind("mouseup",a.tableDnD.mouseup);return this},makeDraggable:function(b){for(var c=b.rows,d=b.tableDnDConfig,f=0;f<c.length;f++)$(c[f]).hasClass("nodrag")||a(c[f]).mousedown(function(e){if("TD"==e.target.tagName){a.tableDnD.dragObject=this;a.tableDnD.currentTable=b;a.tableDnD.mouseOffset=
a.tableDnD.getMouseOffset(this,e);if(d.onDragStart)d.onDragStart(b,this);return!1}}).css("cursor","move")},mouseCoords:function(b){return b.pageX||b.pageY?{x:b.pageX,y:b.pageY}:{x:b.clientX+document.body.scrollLeft-document.body.clientLeft,y:b.clientY+document.body.scrollTop-document.body.clientTop}},getMouseOffset:function(b,c){c=c||window.event;b=this.getPosition(b);c=this.mouseCoords(c);return{x:c.x-b.x,y:c.y-b.y}},getPosition:function(b){var c=0,d=0;0==b.offsetHeight&&(b=b.firstChild);for(;b.offsetParent;)c+=
b.offsetLeft,d+=b.offsetTop,b=b.offsetParent;c+=b.offsetLeft;d+=b.offsetTop;return{x:c,y:d}},mousemove:function(b){if(null!=a.tableDnD.dragObject){var c=a(a.tableDnD.dragObject),d=a.tableDnD.currentTable.tableDnDConfig,f=a.tableDnD.mouseCoords(b);b=f.y-a.tableDnD.mouseOffset.y;var e=window.pageYOffset;document.all&&("undefined"!=typeof document.compatMode&&"BackCompat"!=document.compatMode?e=document.documentElement.scrollTop:"undefined"!=typeof document.body&&(e=document.body.scrollTop));f.y-e<d.scrollAmount?
window.scrollBy(0,-d.scrollAmount):(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight)-(f.y-e)<d.scrollAmount&&window.scrollBy(0,d.scrollAmount);b!=a.tableDnD.oldY&&(f=b>a.tableDnD.oldY,a.tableDnD.oldY=b,d.onDragClass?c.addClass(d.onDragClass):c.css(d.onDragStyle),(c=a.tableDnD.findDropTargetRow(c,b))&&(f&&a.tableDnD.dragObject!=c?a.tableDnD.dragObject.parentNode.insertBefore(a.tableDnD.dragObject,c.nextSibling):
f||a.tableDnD.dragObject==c||a.tableDnD.dragObject.parentNode.insertBefore(a.tableDnD.dragObject,c)));return!1}},findDropTargetRow:function(b,c){for(var d=a.tableDnD.currentTable.rows,f=0;f<d.length;f++){var e=d[f],g=this.getPosition(e).y,h=parseInt(e.offsetHeight)/2;0==e.offsetHeight&&(g=this.getPosition(e.firstChild).y,h=parseInt(e.firstChild.offsetHeight)/2);if(c>g-h&&c<g+h){if(e==b)break;c=a.tableDnD.currentTable.tableDnDConfig;if(c.onAllowDrop){if(!c.onAllowDrop(b,e))break}else if($(e).hasClass("nodrop"))break;
return e}}return null},mouseup:function(b){if(a.tableDnD.currentTable&&a.tableDnD.dragObject){b=a.tableDnD.dragObject;var c=a.tableDnD.currentTable.tableDnDConfig;c.onDragClass?a(b).removeClass(c.onDragClass):a(b).css(c.onDropStyle);a.tableDnD.dragObject=null;if(c.onDrop)c.onDrop(a.tableDnD.currentTable,b);a.tableDnD.currentTable=null}},serialize:function(){if(a.tableDnD.currentTable){for(var b="",c=a.tableDnD.currentTable.id,d=a.tableDnD.currentTable.rows,f=0;f<d.length;f++)0<b.length&&(b+="&"),
b+=c+"[]="+d[f].id;return b}return"Error: No Table id set, you need to set an id on your table and every row"}};a.fn.extend({tableDnD:a.tableDnD.build})})($);
(function(a){var b=function(){var g=document.createElement("input");g.setAttribute("onpaste","");return"function"===typeof g.onpaste?"paste":"input"}()+".mask",c=navigator.userAgent,d=/iphone/i.test(c),f=/android/i.test(c),e;a.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},dataName:"rawMaskFn",placeholder:"_"};a.fn.extend({caret:function(g,h){if(0!==this.length&&!this.is(":hidden")){if("number"==typeof g)return h="number"===typeof h?h:g,this.each(function(){this.setSelectionRange?this.setSelectionRange(g,
h):this.createTextRange&&(p=this.createTextRange(),p.collapse(!0),p.moveEnd("character",h),p.moveStart("character",g),p.select())});if(this[0].setSelectionRange)g=this[0].selectionStart,h=this[0].selectionEnd;else if(document.selection&&document.selection.createRange){var p=document.selection.createRange();g=0-p.duplicate().moveStart("character",-1E5);h=g+p.text.length}return{begin:g,end:h}}},unmask:function(){return this.trigger("unmask")},mask:function(g,h){var p;if(!g&&0<this.length){var u=a(this[0]);
return u.data(a.mask.dataName)()}h=a.extend({placeholder:a.mask.placeholder,completed:null},h);var n=a.mask.definitions;var t=[];var x=p=g.length;var A=null;a.each(g.split(""),function(w,z){"?"==z?(p--,x=w):n[z]?(t.push(new RegExp(n[z])),null===A&&(A=t.length-1)):t.push(null)});return this.trigger("unmask").each(function(){function w(k){for(;++k<p&&!t[k];);return k}function z(k,m){if(!(0>k)){var l=k;for(m=w(m);l<p;l++)if(t[l]){if(m<p&&t[l].test(y[m]))y[l]=y[m],y[m]=h.placeholder;else break;m=w(m)}C();
q.caret(Math.max(A,k))}}function D(k){var m=k.which;if(8===m||46===m||d&&127===m){var l=q.caret();var r=l.begin;l=l.end;if(0===l-r){if(46!==m)for(;0<=--r&&!t[r];);else r=l=w(r-1);l=46===m?w(l):l}E(r,l);z(r,l-1);k.preventDefault()}else 27==m&&(q.val(G),q.caret(0,F()),k.preventDefault())}function v(k){var m=k.which,l=q.caret();if(!(k.ctrlKey||k.altKey||k.metaKey||32>m)&&m){0!==l.end-l.begin&&(E(l.begin,l.end),z(l.begin,l.end-1));l=w(l.begin-1);if(l<p&&(m=String.fromCharCode(m),t[l].test(m))){var r;
var B=l;for(r=h.placeholder;B<p;B++)if(t[B]){var H=w(B);var I=y[B];y[B]=r;if(H<p&&t[H].test(I))r=I;else break}y[l]=m;C();l=w(l);f?setTimeout(a.proxy(a.fn.caret,q,l),0):q.caret(l);h.completed&&l>=p&&h.completed.call(q)}k.preventDefault()}}function E(k,m){for(;k<m&&k<p;k++)t[k]&&(y[k]=h.placeholder)}function C(){q.val(y.join(""))}function F(k){var m=q.val(),l=-1,r;for(pos=r=0;r<p;r++)if(t[r]){for(y[r]=h.placeholder;pos++<m.length;){var B=m.charAt(pos-1);if(t[r].test(B)){y[r]=B;l=r;break}}if(pos>m.length)break}else y[r]===
m.charAt(pos)&&r!==x&&(pos++,l=r);k?C():l+1<x?(q.val(""),E(0,p)):(C(),q.val(q.val().substring(0,l+1)));return x?r:A}var q=a(this),y=a.map(g.split(""),function(k,m){if("?"!=k)return n[k]?h.placeholder:k}),G=q.val();q.data(a.mask.dataName,function(){return a.map(y,function(k,m){return t[m]&&k!=h.placeholder?k:null}).join("")});q.attr("readonly")||q.one("unmask",function(){q.unbind(".mask").removeData(a.mask.dataName)}).bind("focus.mask",function(){clearTimeout(e);G=q.val();var k=F();e=setTimeout(function(){C();
k==g.length?q.caret(0,k):q.caret(k)},10)}).bind("blur.mask",function(){F();q.val()!=G&&q.change()}).bind("keydown.mask",D).bind("keypress.mask",v).bind(b,function(){setTimeout(function(){var k=F(!0);q.caret(k);h.completed&&k==q.val().length&&h.completed.call(q)},0)});F()})}})})(jQuery);
jQuery.fn.extend({getSelection:function(){var a=this.get(0);return a?("selectionStart"in a&&function(){var b=a.selectionEnd-a.selectionStart;return{start:a.selectionStart,end:a.selectionEnd,length:b,text:a.value.substr(a.selectionStart,b)}}||window.getSelection()&&function(){var b=window.getSelection().getRangeAt(0);return{start:b.startOffset,end:b.endOffset,length:b.endOffset-b.startOffset,text:b.toString()}}||document.selection&&function(){a.focus();var b=document.selection.createRange();if(null===
b)return{start:0,end:a.value.length,length:0};var c=a.createTextRange(),d=c.duplicate();c.moveToBookmark(b.getBookmark());d.setEndPoint("EndToStart",c);return{start:d.text.length,end:d.text.length+b.text.length,length:b.text.length,text:b.text}}||function(){return null})():null},setSelection:function(a,b){var c=this.get(0);c&&(c.setSelectionRange?(c.focus(),c.setSelectionRange(a,b)):c.createTextRange&&(c=c.createTextRange(),c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",a),c.select()))},
replaceSelection:function(a){var b=this.get(0);if(!b)return null;var c=a||"";return("selectionStart"in b&&function(){b.value=b.value.substr(0,b.selectionStart)+c+b.value.substr(b.selectionEnd,b.value.length);return this}||document.selection&&function(){b.focus();document.selection.createRange().text=c;return this}||function(){b.value+=c;return jQuery(b)})()}});
jQuery.cookie=function(a,b,c){if(1<arguments.length&&"[object Object]"!==String(b)){c=jQuery.extend({},c);if(null===b||void 0===b)c.expires=-1;if("number"===typeof c.expires){var d=c.expires,f=c.expires=new Date;f.setDate(f.getDate()+d)}b=String(b);return document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};f=c.raw?function(e){return e}:
decodeURIComponent;return(d=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?f(d[1]):null};
(function(a){function b(d){return"object"==typeof d?d:{top:d,left:d}}var c=a.scrollTo=function(d,f,e){a(window).scrollTo(d,f,e)};c.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1,limit:!0};c.window=function(d){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var d=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||
"BackCompat"==d.compatMode?d.body:d.documentElement})};a.fn.scrollTo=function(d,f,e){"object"==typeof f&&(e=f,f=0);"function"==typeof e&&(e={onAfter:e});"max"==d&&(d=9E9);e=a.extend({},c.defaults,e);f=f||e.duration;e.queue=e.queue&&1<e.axis.length;e.queue&&(f/=2);e.offset=b(e.offset);e.over=b(e.over);return this._scrollable().each(function(){function g(A){p.animate(n,f,e.easing,A&&function(){A.call(this,d,e)})}if(null!=d){var h=this,p=a(h),u=d,n={},t=p.is("html,body");switch(typeof u){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=
b(u);break}u=a(u,this);if(!u.length)return;case "object":if(u.is||u.style)var x=(u=a(u)).offset()}a.each(e.axis.split(""),function(A,w){var z="x"==w?"Left":"Top",D=z.toLowerCase(),v="scroll"+z,E=h[v],C=c.max(h,w);x?(n[v]=x[D]+(t?0:E-p.offset()[D]),e.margin&&(n[v]-=parseInt(u.css("margin"+z))||0,n[v]-=parseInt(u.css("border"+z+"Width"))||0),n[v]+=e.offset[D]||0,e.over[D]&&(n[v]+=u["x"==w?"width":"height"]()*e.over[D])):(w=u[D],n[v]=w.slice&&"%"==w.slice(-1)?parseFloat(w)/100*C:w);e.limit&&/^\d+$/.test(n[v])&&
(n[v]=0>=n[v]?0:Math.min(n[v],C));!A&&e.queue&&(E!=n[v]&&g(e.onAfterFirst),delete n[v])});g(e.onAfter)}}).end()};c.max=function(d,f){var e="x"==f?"Width":"Height";f="scroll"+e;if(!a(d).is("html,body"))return d[f]-a(d)[e.toLowerCase()]();e="client"+e;var g=d.ownerDocument.documentElement;d=d.ownerDocument.body;return Math.max(g[f],d[f])-Math.min(g[e],d[e])}})(jQuery);jQuery.fn.css2=jQuery.fn.css;
jQuery.fn.css=function(){if(arguments.length)return jQuery.fn.css2.apply(this,arguments);for(var a="font-family font-size font-weight font-style color box-sizing text-transform text-decoration letter-spacing box-shadow line-height text-align vertical-align direction background-color background-image background-repeat background-position background-attachment opacity width height top right bottom left margin-top margin-right margin-bottom margin-left padding-top padding-right padding-bottom padding-left border-top-width border-right-width border-bottom-width border-left-width border-top-color border-right-color border-bottom-color border-left-color border-top-style border-right-style border-bottom-style border-left-style position display visibility z-index overflow-x overflow-y white-space clip float clear cursor list-style-image list-style-position list-style-type marker-offset".split(" "),b=
a.length,c={},d=0;d<b;d++)c[a[d]]=jQuery.fn.css2.call(this,a[d]);return c};
